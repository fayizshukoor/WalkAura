<main class="flex-grow pt-24 pb-20 px-4 sm:px-6 lg:px-8">
    <div class="max-w-[1250px] mx-auto space-y-8">
        
        <div class="space-y-4">
            <nav class="flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em]">
                <a href="/orders" class="text-gray-500 hover:text-primary transition-colors">Orders</a>
                <span class="text-gray-700">/</span>
                <span class="text-primary">Order Details</span>
            </nav>
            <div class="flex flex-col sm:flex-row sm:items-end justify-between gap-4">
                <div>
                    <h1 class="text-4xl font-black tracking-tighter uppercase text-white">Order Details</h1>
                    <p class="text-gray-500 font-bold text-sm tracking-widest uppercase mt-1">
                        Order ID: <span class="text-primary">#<%= order.orderId %></span>
                    </p>
                </div>
                <div class="bg-primary/10 border border-primary/20 px-4 py-2 rounded-full hidden sm:block">
                    <span class="text-primary text-[10px] font-black uppercase tracking-widest"><%= order.orderStatus %></span>
                </div>
            </div>
        </div>

        <section class="bg-[#12141a] border border-white/10 rounded-[2.5rem] p-10 shadow-xl overflow-x-auto">
            <div class="min-w-[700px] flex justify-between relative px-4">
                <div class="absolute top-5 left-0 w-full h-[2px] bg-white/5 z-0"></div>
                
                <% 
                    const statuses = ['Placed', 'Confirmed', 'Shipped', 'Out for Delivery', 'Delivered'];
                    const currentIndex = statuses.indexOf(order.orderStatus);
                    const progressWidth = (currentIndex / (statuses.length - 1)) * 100;
                %>
                <div class="absolute top-5 left-0 h-[2px] bg-primary z-0 transition-all duration-1000" style="width: <%= progressWidth %>%"></div>

                <% statuses.forEach((status, index) => { %>
                    <div class="relative z-10 flex flex-col items-center gap-3">
                        <div class="w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-500 <%= index <= currentIndex ? 'bg-primary border-primary text-white shadow-[0_0_15px_rgba(92,86,246,0.5)]' : 'bg-black border-white/10 text-gray-600' %>">
                            <span class="material-symbols-outlined text-sm">
                                <%= index < currentIndex ? 'check' : (index === currentIndex ? 'radio_button_checked' : 'circle') %>
                            </span>
                        </div>
                        <span class="text-[9px] font-black uppercase tracking-widest <%= index <= currentIndex ? 'text-white' : 'text-gray-600' %>">
                            <%= status %>
                        </span>
                    </div>
                <% }) %>
            </div>
        </section>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-[#12141a] border border-white/10 rounded-[2rem] p-8 space-y-4 shadow-xl">
                <h3 class="text-primary font-black text-[10px] uppercase tracking-[0.2em] mb-4">Order Information</h3>
                <div class="space-y-3">
                    <div class="flex flex-col">
                        <span class="text-gray-500 text-[9px] uppercase font-bold tracking-widest">Order Date</span>
                        <span class="text-white text-sm font-bold"><%= new Date(order.createdAt).toLocaleDateString() %></span>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-gray-500 text-[9px] uppercase font-bold tracking-widest">Payment Method</span>
                        <span class="text-white text-sm font-bold"><%= order.paymentMethod %></span>
                    </div>
                    <div class="flex flex-col">
                        <span class="text-gray-500 text-[9px] uppercase font-bold tracking-widest">Payment Status</span>
                        <span class="text-green-500 text-[10px] font-black uppercase tracking-widest px-2 py-1 bg-green-500/10 rounded w-fit mt-1">
                            <%= order.paymentStatus %>
                        </span>
                    </div>
                </div>
            </div>

            <div class="bg-[#12141a] border border-white/10 rounded-[2rem] p-8 space-y-4 shadow-xl">
                <h3 class="text-primary font-black text-[10px] uppercase tracking-[0.2em] mb-4">Delivery Address</h3>
                <div class="space-y-1">
                    <p class="text-white font-bold text-base"><%= order.shippingAddress.fullName %></p>
                    <p class="text-gray-400 text-xs leading-relaxed italic">
                        <%= order.shippingAddress.streetAddress %>,<br>
                        <%= order.shippingAddress.city %>, <%= order.shippingAddress.state %>,<br>
                        <%= order.shippingAddress.country %> - <%= order.shippingAddress.pincode %>
                    </p>
                    <p class="text-gray-500 text-[10px] font-bold mt-2 tracking-widest">PH: <%= order.shippingAddress.phone %></p>
                </div>
            </div>

            <div class="bg-[#12141a] border border-white/10 rounded-[2rem] p-8 space-y-4 shadow-xl border-l-primary/30">
                <h3 class="text-primary font-black text-[10px] uppercase tracking-[0.2em] mb-4">Order Summary</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-500 font-bold uppercase tracking-widest">Subtotal</span>
                        <span class="text-white font-bold">₹<%= order.pricing.subtotal.toLocaleString() %></span>
                    </div>
                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-500 font-bold uppercase tracking-widest">Tax (<%= order.pricing.taxPercentage %>%)</span>
                        <span class="text-white font-bold">₹<%= order.pricing.tax.toLocaleString() %></span>
                    </div>
                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-500 font-bold uppercase tracking-widest">Shipping</span>
                        <span class="text-white font-bold">₹<%= order.pricing.shippingCharge %></span>
                    </div>

                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-500 font-bold uppercase tracking-widest">Discount</span>
                        <span class="text-white font-bold">₹<%= order.pricing.discount %></span>
                    </div>

                    <div class="pt-4 border-t border-white/5 flex justify-between items-end">
                        <span class="text-primary font-black uppercase text-[10px] tracking-widest">Total</span>
                        <span class="text-2xl font-black text-white tracking-tighter">₹<%= order.pricing.totalAmount.toLocaleString() %></span>
                    </div>
                </div>
            </div>
        </div>

        <section class="bg-[#12141a] border border-white/10 rounded-[2rem] overflow-hidden shadow-xl">
            <div class="p-6 border-b border-white/10 bg-white/[0.03]">
                <h2 class="text-sm font-black uppercase tracking-widest text-white">Ordered Items</h2>
            </div>
            <div class="divide-y divide-white/5">
                <% order.items.forEach(item => { %>
                <div class="p-8 flex flex-col lg:flex-row items-center gap-8">
                    <div class="w-24 h-24 rounded-2xl bg-black border border-white/10 p-3 flex-shrink-0">
                        <img src="<%= item.image %>" class="w-full h-full object-contain" alt="<%= item.productName %>">
                    </div>
                    <div class="flex-1 text-center lg:text-left">
                        <p class="text-[9px] text-primary font-black uppercase tracking-[0.3em] mb-1">SKU: <%= item.sku %></p>
                        <h3 class="text-white font-bold text-lg"><%= item.productName %></h3>
                        <div class="flex flex-wrap justify-center lg:justify-start gap-4 mt-2">
                            <p class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Size: <span class="text-white"><%= item.size %></span></p>
                            <p class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Qty: <span class="text-white"><%= item.quantity %></span></p>
                            <span class="text-green-500 bg-green-500/10 px-2 py-0.5 rounded text-[8px] font-black uppercase tracking-widest"><%= item.status %></span>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center gap-6 w-full lg:w-auto">
                        <div class="text-center sm:text-right min-w-[100px]">
                            <p class="text-white font-black text-xl tracking-tighter">₹<%= item.itemTotal.toLocaleString() %></p>
                            <p class="text-[10px] text-gray-500 font-bold uppercase">₹<%= item.price.toLocaleString() %> / unit</p>
                        </div>
                        
                        <button class="w-full sm:w-auto bg-white/5 hover:bg-red-500/10 border border-white/10 hover:border-red-500/30 text-gray-400 hover:text-red-500 px-6 py-2.5 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all">
                            <%= item.status === 'Delivered' ? 'Return Item' : 'Cancel Item' %>
                        </button>
                    </div>
                </div>
                <% }) %>
            </div>
        </section>

        <div class="flex flex-col sm:flex-row justify-end gap-4 pt-4 pb-10">
            <button class="w-full sm:w-auto px-10 py-5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 text-red-500 font-black uppercase tracking-[0.2em] text-[10px] rounded-2xl transition-all">
                <%= order.orderStatus === 'Delivered' ? 'Return Entire Order' : 'Cancel Entire Order' %>
            </button>
            <button class="w-full sm:w-auto px-10 py-5 bg-primary hover:bg-indigo-600 text-white font-black uppercase tracking-[0.2em] text-[10px] rounded-2xl transition-all shadow-2xl shadow-primary/30 flex items-center justify-center gap-3">
                <span class="material-symbols-outlined text-sm">download</span>
                Download Invoice
            </button>
        </div>

    </div>
</main>